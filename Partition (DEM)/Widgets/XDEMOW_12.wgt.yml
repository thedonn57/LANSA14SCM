Widget:
  Name:               xDemoWebGoogleBarChart
  Target Platform:    Browser
  Widget Type:        Control

  Framework:
    Id1:                10240
    Id2:                30

  Multilingual Details:
  - ENG:
      Description:        "Google Bar Chart"

  - FRA:
      Description:        "Google Bar Chart"

  Properties:
  - Title:
      Description:        "Title displayed on the barchart"
      Type:               String
      Default Value:      "Title"
      Read-only:          No

  - HorizontalCaption:
      Description:        "Horizontal axis caption"
      Type:               String
      Read-only:          No

  - VerticalCaption:
      Description:        "Vertical axis caption"
      Type:               String
      Read-only:          No

  - ValueCaption:
      Description:        "Value caption"
      Type:               String
      Default Value:      "Value"
      Read-only:          No

  Methods:
  - Draw:
      Description:        "Draws a picture"

  - Insert:
      Description:        "Inserts a column into the barchart"

      Parameters:
      - Value:
          Type:               Decimal

      - Caption:
          Type:               String

  - Clear:
      Description:        "Clear the barchart"

  Events:
  - ItemSelected:

      Parameters:
      - Index:
          Type:               Integer

      - Description:
          Type:               String

      - Value:
          Type:               Integer

  Scripts:
  - https://www.google.com/jsapi

  Source: |
    function( PROTOTYPE, WIDGET )
    {
      //--------------------------------------------------------------------------
      // LOAD GOOGLE PIECHART ONLY WHEN THAT IS COMPLETED CAN WE FINALIZE THE WIDGET 
      //--------------------------------------------------------------------------
      google.load( 'visualization', '1', { packages:["corechart"], callback: WIDGET.Finalize } );
    
      //--------------------------------------------------------
      // WIDGET-INTERFACE FUNCTIONS (CALLED FROM THE VL-RUNTIME)
      //--------------------------------------------------------
    
      //
      // 'onCreateInstance' - gets called when LANSA creates an instance of this class.
      //
      PROTOTYPE.onCreateInstance = function()
      {
        // Create the datatable
        this.m_DataTable = new google.visualization.DataTable();
    
        this.m_DataTable.addColumn( 'string', '' );
        this.m_DataTable.addColumn( 'number', '' );
      } 
       
      //
      // 'onRealizeControl' - gets called when LANSA creates a visual representation of an instance of this class.
      //
      // Parameters:
      //
      // - parentDiv : the div that's been created as a container for this control. Its size and style are controlled by 
      //               RDMLX, its content by the JavaScript below.
      //
      PROTOTYPE.onRealizeControl = function( parentDiv )
      {
        this.m_ParentDiv = parentDiv;
    
        // Create the chart
        this.m_Chart = new google.visualization.ColumnChart( parentDiv );
    
        // Hook up event handlers
        this.AttachEvents();
    
        this.DrawChart();
      }
    
      //
      // 'onSizeChanged - gets called when the widget changes size.
      //
      PROTOTYPE.onSizeChanged = function()
      {
        this.DrawChart();
      }
    
      //////////////// 
      // Properties //
      //////////////// 
    
      //
      // getTitle
      //
      PROTOTYPE.getTitle = function()
      {
        return this.m_Title;
      }
    
      //
      // setTitle
      //
      PROTOTYPE.setTitle = function( strTitle )
      {
        this.m_Title = strTitle;
    
        this.DrawChart();
      }
    
      //
      // HorizontalCaption - Horizontal Caption
      //
      // Type: String
      //
      PROTOTYPE.getHorizontalCaption = function()
      {
        return this.m_HorizontalCaption;
      }
    
      PROTOTYPE.setHorizontalCaption = function( strValue )
      {
        this.m_HorizontalCaption = strValue;
      }
    
      //
      // VerticalCaption - Vertical Caption
      //
      // Type: String
      //
      PROTOTYPE.getVerticalCaption = function()
      {
        return this.m_VerticalCaption;
      }
    
      PROTOTYPE.setVerticalCaption = function( strValue )
      {
        this.m_VerticalCaption = strValue;
      }
    
      //
      // ValueCaption - Value Caption
      //
      // Type: String
      //
      PROTOTYPE.getValueCaption = function()
      {
        return this.m_ValueCaption;
      }
    
      PROTOTYPE.setValueCaption = function( strValue )
      {
        this.m_ValueCaption = strValue;
    
        this.m_DataTable.setColumnLabel( 1, this.m_ValueCaption );
    
        this.DrawChart();
      }
    
      ///////////// 
      // Methods //
      ///////////// 
    
      //
      // Clear - Clears the chart
      //
      PROTOTYPE.Clear = function()
      {
        // Initialize member data
        this.m_DataTable.removeRows( 0, this.m_DataTable.getNumberOfRows() );
    
        this.DrawChart();
      }
    
      //
      // Insert - Inserts a column into the chart
      //
      // Parameters:
      // - Value: Decimal
      // - Caption: String
      //
      PROTOTYPE.Insert = function( decValue, strCaption )
      {
        this.m_DataTable.addRow( [ strCaption, decValue ] );
    
        this.DrawChart();
      }
    
      //////////////////////
      // Helper functions //
      ////////////////////// 
    
      //
      // AttachEvents
      //
      PROTOTYPE.AttachEvents = function()
      {
        var pThis = this;
    
        // EVENT: select
        google.visualization.events.addListener( this.m_Chart, 'select', function()
        {
          var 
            selectedItem = pThis.m_Chart.getSelection()[0];
    
          if ( selectedItem ) 
          {
    
            pThis.fireItemSelected( ( selectedItem.row + 1 ), pThis.m_DataTable.getValue( selectedItem.row, 1 ), pThis.m_DataTable.getValue( selectedItem.row, 0 ) );
    
          }
        });  
      }
    
      //
      // DrawChart
      //
      PROTOTYPE.DrawChart = function()
      {
        if ( this.m_Chart )
        {
          this.m_Chart.draw( this.m_DataTable, 
          {
            title: this.m_Title,
            width: this.m_ParentDiv.offsetWidth, 
            height: this.m_ParentDiv.offsetHeight,
            bar: {groupWidth: "98%"},
            legend: { position: "none" },
            backgroundColor: 'transparent',
            hAxis: {
              title: this.m_HorizontalCaption
            },
            vAxis: {
              title: this.m_VerticalCaption
            }
          }); 
        }
      }
    
      // We're still loading (waiting for a callback)
      return WIDGET.Loading;
    }
    

  Image: |
    89504E470D0A1A0A0000000D49484452000002430000015608060000006ACA992E000000017352474200AECE1CE900000004
    67414D410000B18F0BFC6105000000097048597300000EC300000EC301C76FA8640000001874455874536F66747761726500
    7061696E742E6E657420342E302E35658532650000107149444154785EEDDC4F6A6CD77AC661CFC543F014041E832670C12D
    353281805A9E813202373481A4150B835BEADC96CDE11ACC256E85607221E4F62A5A92EBDC3A95D77FA4A3EFDB7B693D8207
    ED7AB7741AFB80EAC7AE923E391C0E0000CB8A2300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200
    AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE2
    0800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000
    AB882300C02AE20800B08A380200AC228E0000AB882300C02AE2C8FE7CFAE9A70FFF5B9F44E3FCE79F7FFEFE78F8F2CB2F0F
    5F7DF5D5E3E3713CCE7DF3CD37EFCF03004FE2C87E8DA019613302E7FCDCD188A0F1356208007E5F1CD9AF5F8BA1E39DA1E3
    F9A3F175E731748CA561DC713AFE1B00B0A238B25FBF1743E3F8ECCED0073174F6FD8F3134BEF7E1E3FDBF05002B8923FBF5
    B131743CFEE1871F3E38F7CBE3F7FF1E00AC228EECD7C7C6D0175F7CF1787C4E0C01B0AA38B25FAF7C67E8FDF703C0AAE2C8
    7E7D6C0C9D7FFFF83E6FA20660657164BFFE480C0DE378182F8B9DC6D038778CA5A3E3F700C08AE20800B08A380200AC228E
    0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B0
    8A380200AC228E0000AB882300C02AE20800B08A38F27C17171787A3EBEBEB87E9697FF7EEDDFBFD686CC7F300C0B6E2C8F3
    5C5D5D1D6E6F6F1F0E9F1E8FE0393E1E9F2F2F2FDF9F0300F6258E7C9C11473737370F87874FC6E7D33B4500C0BEC4918F33
    EE041DEF0C8D103A7D89ECF40E1200B0BD38F272237E4E5F161BC7C7BB447777778F41343E1FCFFF51F7F7F70700E674FE33
    9D7D89232F33A267C4CEF97EEAF4253400607B71E4F9CEEF08FD1A310400FB12479E67C4CD889CF37D387D59ECF832995FAD
    0780FD8823CF3302E7DCF137C8CEFFCED04BDE2F0400D4892300C02AE20800B08A380200AC228E0000AB882300C02AE20800
    B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB88
    2300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200
    AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE208C0DBF7F7BFFFEFE16F7FFB6F8A8CEB7B7ECD
    D9A73802F0F68D27EC9FFEE3AF1419D7F7FC9AB34F7104E0ED1343B5C4D03CE208C0DB27866A89A179C41180B74F0CD51243
    F38823006F9F18AA2586E6114700DE3E31544B0CCD238E00BC7D62A896189A471C0178FBC4502D31348F3802F0F689A15A62
    681E7104E0ED1343B5C4D03CE2C8F35D5C5C1C8EAEAFAF1FA67F9C1B8F8FE7EEEEEE3E3807B01531544B0CCD238E3CCFD5D5
    D5E1F6F6F6E1F0E9F1889EE3E3F1F9F2F2721C3F86D038377680AD89A15A62681E71E4E38C38BAB9B97938FCE0F8F16384D1
    6938016C450CD51243F388231FE734784E8E1F3F4E4309604B62A896189A471C79B9F1FEA05F5E167B7CFC5A31747F7F7F00
    784DDF7FFF5D7C12E7758CEB7BBCD6E73FD3D99738F2322372CEDF13E4CE10B057EE0CD57267681E71E4F9CEEF081D79CF10
    B05762A896189A471C799E113B237ACEF76184CF2F91E4B7C9805D1143B5C4D03CE2C8F38CC03977FAB786FC9D21608FC450
    2D31348F3802F0F689A15A62681E7104E0ED1343B5C4D03CE208C0DB27866A89A179C4116013FFF3EF87C37FFE3355C6F53D
    B9DE62A896189A471C0136319EB0BF7B38A4C6B8BE27D75B0CD51243F38823C026C4502D31D44A0CCD238E009B1043B5C450
    2B31348F38026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B
    31348F38026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31
    348F38026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B3134
    8F38026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F
    38026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F38
    026C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F3802
    6C420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F38026C
    420CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F38026C42
    0CD51243ADC4D03CE208B00931544B0CB51243F38823C026C4502D31D44A0CCD238E009B1043B5C4502B31348F38026C420C
    D51243ADC4D03CE2C8CB5D5E5E1E6E6F6F1F0E9F1EBF7BF7EE707171F181B11DCF0327C4502D31D44A0CCD238EBCCC08A111
    3BA731348EC77E7C0CFC0631544B0CB51243F38823CF73BCFB33C2E73C866E6E6E0ED7D7D7EF1F03BF410CD51243ADC4D03C
    E2C8CB9DC7D008A1B11D9D9E03CE88A15A62A895189A471C79B9F3E0192F918DBB43E3F8EEEEEE3188C6E7E379E08418AA25
    865A89A179C49197FBBDBB3F575757EFE3E839EEEFEF0FF0D6FDF4E73FE527715EC5B8BEA7D7FBFBEFBF8B4FE2BC8E717D8F
    D7FAFC673AFB12475EAE2A866009EE0CD57267A8953B43F388232F771E43A72F8B1D5F26F3ABF5F02BC4502D31D44A0CCD23
    8EBCDC790C9DFF9D21EF1782DF20866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D
    88A15A62A895189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88
    A15A62A895189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A1
    5A62A895189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A
    62A895189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62
    A895189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A8
    95189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A895
    189A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A89518
    9A471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A895189A
    471C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A895189A47
    1C013621866A89A15662681E7104D88418AA25865A89A179C411601362A896186A2586E61147804D88A15A62A895189A471C
    013621866A89A15662681E71E4E52E2F2F0FB7B7B70F87FFD8AEAFAF0F1717178FEEEEEE3E38C7BEFDFCF3CF871F7FFC9122
    E3FA7E70CDC5502D31D44A0CCD238EBCCC08A1113CA731348EC73E3E46088DF363670EE309FBEBAFBFA6C8B8BE1F5C733154
    4B0CB51243F38823CFF3EEDDBBF711741E43575757879B9B9BF1F8F123DD3962BFC4502D31D44C0CB51243F388232F771E43
    27F1F3F8711247FFEF7BD91F31544B0C351343ADC4D03CE2C8CB89A1B7450CD51243CDC4502B31348F38F2725531747F7F7F
    A0DFB7DF7E1B9FC4791DE3FA9E5EEF9FFEFCA7FC24CEAB18D7F7F47A7FFFFD77F1499CD731AEEFF15A9FFF4C675FE2C8CB79
    CFD0DBE2CE502D77869AB933D4CA9DA179C491973B8FA1713C02687CF86DB2F988A15A62A899186A2586E611475EEE3C8606
    7F67685E62A896186A26865A89A179C4117822866A89A16662A895189A471C812762A896186A26865A89A179C4117822866A
    89A16662A895189A471C812762A896186A26865A89A179C4117822866A89A16662A895189A471C812762A896186A26865A89
    A179C4117822866A89A16662A895189A471CD9AFFFFACBFDE12FFFF62F1419D7F7F47A8BA15A62A899186A2586E61147F66B
    3C61FFEB3F7D4691717D4FAFB718AA25869A89A15662681E7164BFC4502D31D44B0C351343ADC4D03CE2C87E89A15A62A897
    186A26865A89A179C491FD1243B5C4502F31D44C0CB51243F38823FB25866A89A15E62A899186A2586E61147F64B0CD51243
    BDC4503331D44A0CCD238EEC9718AA25867A89A16662A895189A471CD92F31544B0CF51243CDC4502B31348F38B25F62A896
    18EA25869A89A15662681E7164BFC4502D31D44B0C351343ADC4D03CE2C87E89A15A62A897186A26865A89A179C491FD1243
    B5C4502F31D44C0CB51243F38823FB25866A89A15E62A899186A2586E61147F64B0CD51243BDC4503331D44A0CCD238EEC97
    18AA25867A89A16662A895189A471CD92F31544B0CF51243CDC4502B31348F38B25F62A89618EA25869A89A15662681E7164
    BFC4502D31D44B0C351343ADC4D03CE2C87E89A15A62A897186A26865A89A179C491FD1243B5C4502F31D44C0CB51243F388
    23FB25866A89A15E62A899186A2586E61147F64B0CD51243BDC4503331D44A0CCD238EEC9718AA25867A89A16662A895189A
    471CD92F31544B0CF51243CDC4502B31348F38B25F62A89618EA25869A89A15662681E7164BFC4502D31D44B0C351343ADC4
    D03CE2C87E89A15A62A897186A26865A89A179C491FD1243B5C4502F31D44C0CB51243F38823FB25866A89A15E62A899186A
    2586E61147F64B0CD51243BDC4503331D44A0CCD238EEC9718AA25867A89A16662A895189A471CD92F31544B0CF51243CDC4
    502B31348F38B25F62A89618EA25869A89A15662681E7164BFC4502D31D44B0C351343ADC4D03CE2C87E89A15A62A897186A
    26865A89A179C491FD1243B5C4502F31D44C0CB51243F38823FB25866A89A15E62A899186A2586E611475ECFBB77EF0E1717
    171F18DBF9D7FD5162A89618EA25869A89A15662681E71E4F5DCDEDE1E2E2F2F1F0EF3F9E71243B5C4502F31D44C0CB51243
    F38823AFE7E6E6E6707D7DFD7098CF3F9718AA25867A89A16662A895189A471C793D23844E5F221B778ACEBFE639C4502D31
    D44B0C351343ADC4D03CE2C8EB192F918DBB43E3F8EEEEEE3188C6E7E3F93FEAB3CF3E3B0030A7F39FE9EC4B1CA9737575F5
    3E8E0080EDC5913A620800F6258EBC9ED397C58E2F937DCCAFD60300AF2B8EBC9EF3BF33F492F70B010075E20800B08A3802
    00AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02A
    E20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E00
    00AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A
    380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300
    C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC228E0000AB882300C02AE20800B08A380200AC22
    8E0000AB882300C02AE20800B08A380200AC228E0000AB882300C01A0E9FFC1F2EC26341D2A1E39A0000000049454E44AE42
    6082
